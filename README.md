# 分布式原理

*互联网发展至今，为了应对更高的业务量、提供更优质的服务，后端从单体服务逐渐演进至当下主流的分布式架构。所谓分布式，通俗来说就是将一个大而全的服务，基于业务领域拆分为多个独立的子服务(低耦合、高内聚)，并针对每个子服务部署合适的实例，不通的实例在空间上是可以随意分布的。*

### 1、分布式理论

#### 1.1 一致性
- 强一致性
- 弱一致性
  - 读写一致性 
  - 单调读一致性
  - 因果一致性
  - 最终一致性

#### 1.2 CAP定理
- 一致性 Consistency
  - 在数据一致性抵达之前, 不对外提供服务
- 可用性 Availability
  - 在数据一致性抵达之前, 仍对外提供服务, 哪怕响应的为旧数据
- 分区容错性 Partition tolerance
  - 分区容错性 P 是分布式系统的前提, 因此只在CA之间做取舍, P 必须保留

#### 1.3 BASE理论
- 基本可用  BA - Basically Available
- 软状态    S - Soft state
- 最终一致性 E -  Eventually consistent

#### 1.4 分布式事务
- ACID 
  - A - Atomicity（原子性）
  - C - Consistency（一致性）
  - I - Isolation（隔离性）
  - D - Durablity（持久性）
- 分布式环境中多服务实例配合对外提供服务, 因此一次事务的提供涉及到多节点的读写操作, 跨节点操作无法基于数据库自身来满足ACID四大特性, 此时就需要分布式事务来实现跨节点操作操作事物

#### 1.5 一致性协议 - 2PC

#### 1.6 一致性协议 - 3PC

#### 1.7 一致性算法 - Paxos

#### 1.8 一致性算法 - Raft



### 2、分布式系统设计策略
- 心跳检测
- 高可用设计
- 容错性
- 负载均和鞥

### 3、分布式架构网络通信
- RPC
- RMI
- BIO、NIO、AIO
- Netty